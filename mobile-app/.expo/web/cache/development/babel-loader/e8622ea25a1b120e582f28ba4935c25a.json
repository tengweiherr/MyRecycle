{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport { useKeyboardDismissable, usePropsResolution, useToken } from \"../../../hooks\";\nimport React from 'react';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { Popper } from \"../Popper\";\nimport { PopoverContext } from \"./PopoverContext\";\nimport { useHasResponsiveProps } from \"../../../hooks/useHasResponsiveProps\";\nexport var PopoverContent = React.forwardRef(function (props, ref) {\n  var _ref, _ref2, _props$bgColor;\n\n  var _React$useContext = React.useContext(PopoverContext),\n      onClose = _React$useContext.onClose,\n      initialFocusRef = _React$useContext.initialFocusRef,\n      finalFocusRef = _React$useContext.finalFocusRef,\n      popoverContentId = _React$useContext.popoverContentId,\n      headerMounted = _React$useContext.headerMounted,\n      bodyMounted = _React$useContext.bodyMounted,\n      bodyId = _React$useContext.bodyId,\n      headerId = _React$useContext.headerId,\n      isOpen = _React$useContext.isOpen;\n\n  var resolvedProps = usePropsResolution('PopoverContent', props);\n  var arrowDefaultColor = (_ref = (_ref2 = (_props$bgColor = props.bgColor) !== null && _props$bgColor !== void 0 ? _props$bgColor : props.bg) !== null && _ref2 !== void 0 ? _ref2 : props.backgroundColor) !== null && _ref !== void 0 ? _ref : resolvedProps.backgroundColor;\n  var color = useToken('colors', arrowDefaultColor);\n  React.useEffect(function () {\n    var finalFocusRefCurrentVal = finalFocusRef === null || finalFocusRef === void 0 ? void 0 : finalFocusRef.current;\n\n    if (initialFocusRef && initialFocusRef.current) {\n      initialFocusRef.current.focus();\n    }\n\n    return function () {\n      if (finalFocusRefCurrentVal) {\n        finalFocusRefCurrentVal.focus();\n      }\n    };\n  }, [finalFocusRef, initialFocusRef]);\n  useKeyboardDismissable({\n    enabled: true,\n    callback: onClose\n  });\n  var arrowElement = null;\n  var restChildren = [];\n  React.Children.forEach(props.children, function (child) {\n    if (child.type.displayName === 'PopperArrow') {\n      var _child$props$color;\n\n      arrowElement = React.cloneElement(child, {\n        backgroundColor: (_child$props$color = child.props.color) !== null && _child$props$color !== void 0 ? _child$props$color : color\n      });\n    } else {\n      restChildren.push(child);\n    }\n  });\n  var accessibilityProps = Platform.OS === 'web' ? {\n    'accessibilityRole': 'dialog',\n    'aria-labelledby': headerMounted ? headerId : undefined,\n    'aria-describedby': bodyMounted ? bodyId : undefined\n  } : {};\n\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n\n  return React.createElement(Popper.Content, _extends({\n    nativeID: popoverContentId\n  }, accessibilityProps, resolvedProps, {\n    ref: ref,\n    isOpen: isOpen\n  }), arrowElement, restChildren);\n});\nPopoverContent.displayName = 'PopoverContent';","map":{"version":3,"sources":["PopoverContent.tsx"],"names":["PopoverContent","isOpen","React","resolvedProps","usePropsResolution","arrowDefaultColor","props","color","useToken","finalFocusRefCurrentVal","finalFocusRef","initialFocusRef","useKeyboardDismissable","enabled","callback","onClose","arrowElement","restChildren","child","backgroundColor","accessibilityProps","headerMounted","bodyMounted","undefined","useHasResponsiveProps","popoverContentId"],"mappings":"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","sourcesContent":["import {\n  useKeyboardDismissable,\n  usePropsResolution,\n  useToken,\n} from '../../../hooks';\nimport React from 'react';\nimport { Platform } from 'react-native';\nimport type { IPopoverContentProps } from './types';\nimport { Popper } from '../Popper';\nimport { PopoverContext } from './PopoverContext';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nexport const PopoverContent = React.forwardRef(\n  (props: IPopoverContentProps, ref: any) => {\n    const {\n      onClose,\n      initialFocusRef,\n      finalFocusRef,\n      popoverContentId,\n      headerMounted,\n      bodyMounted,\n      bodyId,\n      headerId,\n      isOpen,\n    } = React.useContext(PopoverContext);\n    const resolvedProps = usePropsResolution('PopoverContent', props);\n\n    const arrowDefaultColor =\n      props.bgColor ??\n      props.bg ??\n      props.backgroundColor ??\n      resolvedProps.backgroundColor;\n    const color = useToken('colors', arrowDefaultColor);\n\n    React.useEffect(() => {\n      const finalFocusRefCurrentVal = finalFocusRef?.current;\n      if (initialFocusRef && initialFocusRef.current) {\n        initialFocusRef.current.focus();\n      }\n\n      return () => {\n        if (finalFocusRefCurrentVal) {\n          finalFocusRefCurrentVal.focus();\n        }\n      };\n    }, [finalFocusRef, initialFocusRef]);\n\n    useKeyboardDismissable({\n      enabled: true,\n      callback: onClose,\n    });\n\n    let arrowElement = null;\n    const restChildren: any = [];\n    React.Children.forEach(props.children, (child) => {\n      if (child.type.displayName === 'PopperArrow') {\n        arrowElement = React.cloneElement(child, {\n          backgroundColor: child.props.color ?? color,\n        });\n      } else {\n        restChildren.push(child);\n      }\n    });\n\n    const accessibilityProps =\n      Platform.OS === 'web'\n        ? ({\n            'accessibilityRole': 'dialog',\n            'aria-labelledby': headerMounted ? headerId : undefined,\n            'aria-describedby': bodyMounted ? bodyId : undefined,\n          } as any)\n        : {};\n\n    //TODO: refactor for responsive prop\n    if (useHasResponsiveProps(props)) {\n      return null;\n    }\n\n    return (\n      <Popper.Content\n        nativeID={popoverContentId}\n        {...accessibilityProps}\n        {...resolvedProps}\n        ref={ref}\n        isOpen={isOpen}\n      >\n        {arrowElement}\n        {restChildren}\n      </Popper.Content>\n    );\n  }\n);\n\nPopoverContent.displayName = 'PopoverContent';\n"]},"metadata":{},"sourceType":"module"}