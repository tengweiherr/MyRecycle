{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { NativeBaseProvider, Box, Button, ScrollView, Stack, Center, Accordion, Text, Divider, List, Image, PresenceTransition, Pressable, VStack, Heading, HStack, FlatList, Spinner } from 'native-base';\nimport { useFocusEffect, useIsFocused, useNavigation } from '@react-navigation/native';\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { UserContext, LoadingContext } from \"../../context/context\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var MyPoints = function MyPoints() {\n  var Navigation = useNavigation();\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var _useContext2 = useContext(LoadingContext),\n      setIsLoading = _useContext2.setIsLoading;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  useEffect(function () {\n    var ac = new AbortController();\n    setIsLoading(true);\n    fetch(\"http://192.168.100.31:3000/\" + 'mrpoint/' + user.id, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (results) {\n      setData(results);\n      setIsLoading(false);\n    }).catch(function (err) {\n      setError(err);\n    });\n    return function () {\n      return ac.abort();\n    };\n  }, []);\n\n  var renderItem = function renderItem(_ref) {\n    var item = _ref.item;\n    return _jsx(Box, {\n      borderBottomWidth: \"1\",\n      _dark: {\n        borderColor: \"gray.600\"\n      },\n      borderColor: \"coolGray.200\",\n      py: \"2\",\n      children: _jsxs(Pressable, {\n        backgroundColor: \"#F9F9F9\",\n        rounded: \"lg\",\n        p: \"4\",\n        overflow: \"hidden\",\n        children: [item.event === \"recycle\" ? _jsx(Image, {\n          source: require(\"../../public/assets/recycle_bg.png\"),\n          style: {\n            position: \"absolute\",\n            right: 12,\n            top: -20\n          },\n          alt: \"Alternate Text\",\n          size: \"40\"\n        }) : _jsx(_Fragment, {}), item.event === \"game\" ? _jsx(Image, {\n          source: require(\"../../public/assets/game_bg.png\"),\n          style: {\n            position: \"absolute\",\n            right: 10,\n            top: -70\n          },\n          alt: \"Alternate Text\",\n          size: \"40\"\n        }) : _jsx(_Fragment, {}), item.event === \"redeem\" ? _jsx(Image, {\n          source: require(\"../../public/assets/reward_bg.png\"),\n          style: {\n            position: \"absolute\",\n            right: 10,\n            top: -30\n          },\n          alt: \"Alternate Text\",\n          size: \"40\"\n        }) : _jsx(_Fragment, {}), _jsxs(HStack, {\n          space: 3,\n          justifyContent: \"space-between\",\n          children: [_jsxs(VStack, {\n            children: [item.event === \"recycle\" ? _jsx(Text, {\n              color: \"coolGray.800\",\n              bold: true,\n              fontSize: \"md\",\n              children: item.collector_name\n            }) : _jsx(_Fragment, {}), item.event === \"game\" ? _jsx(Text, {\n              color: \"coolGray.800\",\n              bold: true,\n              fontSize: \"md\",\n              children: \"Game Reward\"\n            }) : _jsx(_Fragment, {}), item.event === \"redeem\" ? _jsx(Text, {\n              color: \"coolGray.800\",\n              bold: true,\n              fontSize: \"md\",\n              children: \"Voucher Redeemed\"\n            }) : _jsx(_Fragment, {}), _jsx(Text, {\n              color: \"coolGray.600\",\n              children: item.time.split('T')[0]\n            })]\n          }), _jsx(VStack, {\n            justifyContent: \"center\",\n            children: item.event === \"redeem\" ? _jsxs(Text, {\n              color: \"danger.600\",\n              fontSize: \"lg\",\n              bold: true,\n              children: [\"-\", item.points_given !== 0 ? item.points_given : \"0\", \" pts\"]\n            }) : _jsxs(Text, {\n              color: \"#1FAA8F\",\n              fontSize: \"lg\",\n              bold: true,\n              children: [\"+\", item.points_given !== 0 ? item.points_given : \"0\", \" pts\"]\n            })\n          })]\n        })]\n      })\n    });\n  };\n\n  return _jsx(_Fragment, {\n    children: _jsx(Box, {\n      w: \"full\",\n      h: \"full\",\n      backgroundColor: \"#f2f2f2\",\n      children: _jsxs(VStack, {\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        p: \"5\",\n        space: 3,\n        children: [_jsxs(Box, {\n          p: \"3\",\n          w: \"full\",\n          style: styles.container,\n          overflow: \"hidden\",\n          children: [_jsx(Image, {\n            source: require(\"../../public/assets/mr-bg.png\"),\n            style: {\n              position: \"absolute\",\n              right: -20,\n              top: -40\n            },\n            alt: \"Alternate Text\",\n            size: \"56\"\n          }), _jsxs(HStack, {\n            justifyContent: \"space-between\",\n            px: \"3\",\n            py: \"2\",\n            children: [_jsxs(VStack, {\n              justifyContent: \"space-between\",\n              children: [_jsx(Heading, {\n                mb: \"4\",\n                children: user.name\n              }), _jsx(Text, {\n                children: \"Available Balance:\"\n              }), _jsxs(Text, {\n                fontSize: \"3xl\",\n                bold: true,\n                mt: \"-1\",\n                color: \"#1FAA8F\",\n                children: [user.mr_points, \" pts\"]\n              })]\n            }), _jsxs(VStack, {\n              justifyContent: \"flex-end\",\n              py: \"1\",\n              space: 1,\n              children: [_jsx(TouchableOpacity, {\n                onPress: function onPress() {\n                  return Navigation.navigate(\"Conversion Rates\");\n                },\n                children: _jsx(Center, {\n                  borderColor: \"#1FAA8F\",\n                  borderWidth: \"2\",\n                  px: \"3\",\n                  py: \"1\",\n                  rounded: \"2xl\",\n                  mt: \"5\",\n                  children: _jsx(Text, {\n                    fontSize: \"sm\",\n                    color: \"#1FAA8F\",\n                    bold: true,\n                    children: \"Conversion Rates\"\n                  })\n                })\n              }), _jsx(TouchableOpacity, {\n                onPress: function onPress() {\n                  return Navigation.navigate(\"Reward List\");\n                },\n                children: _jsx(Center, {\n                  backgroundColor: \"#FC8B10\",\n                  px: \"3\",\n                  py: \"1\",\n                  rounded: \"2xl\",\n                  borderWidth: \"1\",\n                  borderColor: \"#FC8B10\",\n                  children: _jsx(Text, {\n                    fontSize: \"sm\",\n                    color: \"white\",\n                    bold: true,\n                    children: \"Redeem Rewards\"\n                  })\n                })\n              })]\n            })]\n          })]\n        }), _jsx(Heading, {\n          fontSize: \"md\",\n          pl: \"4\",\n          mt: \"5\",\n          children: \"History\"\n        }), !data ? _jsx(Text, {\n          children: \"Loading...\"\n        }) : _jsx(FlatList, {\n          data: data,\n          inverted: true,\n          scrollToOverflowEnabled: false,\n          width: \"full\",\n          height: \"440\",\n          initialNumToRender: 5,\n          maxToRenderPerBatch: 10,\n          renderItem: renderItem,\n          keyExtractor: function keyExtractor(item) {\n            return parseInt(item.mrpoint_id);\n          }\n        }), _jsx(VStack, {\n          justifyContent: \"flex-start\",\n          alignItems: \"flex-start\"\n        })]\n      })\n    })\n  });\n};\nexport default (function () {\n  return _jsx(NativeBaseProvider, {\n    children: _jsx(Center, {\n      flex: 1,\n      children: _jsx(MyPoints, {})\n    })\n  });\n});\nvar styles = StyleSheet.create({\n  container: {\n    shadowColor: '#171717',\n    shadowOffset: {\n      width: 0,\n      height: 0\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 8,\n    elevation: 20,\n    backgroundColor: 'white',\n    borderRadius: 14\n  }\n});","map":{"version":3,"sources":["/Users/weiherr/Desktop/FYP/MyRecycle/mobile-app/screens/reward/MRWallet.js"],"names":["React","useCallback","useContext","useEffect","useState","NativeBaseProvider","Box","Button","ScrollView","Stack","Center","Accordion","Text","Divider","List","Image","PresenceTransition","Pressable","VStack","Heading","HStack","FlatList","Spinner","useFocusEffect","useIsFocused","useNavigation","TouchableOpacity","AsyncStorage","UserContext","LoadingContext","MyPoints","Navigation","user","setIsLoading","data","setData","error","setError","ac","AbortController","fetch","id","method","headers","then","response","json","results","catch","err","abort","renderItem","item","borderColor","event","require","position","right","top","collector_name","time","split","points_given","styles","container","name","mr_points","navigate","parseInt","mrpoint_id","StyleSheet","create","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","backgroundColor","borderRadius"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,UAA7B,EAAyCC,SAAzC,EAAoDC,QAApD,QAAoE,OAApE;AACA,SAASC,kBAAT,EAA6BC,GAA7B,EAAkCC,MAAlC,EAA0CC,UAA1C,EAAsDC,KAAtD,EAA6DC,MAA7D,EAAqEC,SAArE,EAAgFC,IAAhF,EAAsFC,OAAtF,EAA+FC,IAA/F,EAAqGC,KAArG,EAA4GC,kBAA5G,EAAgIC,SAAhI,EAA2IC,MAA3I,EAAmJC,OAAnJ,EAA4JC,MAA5J,EAAoKC,QAApK,EAA8KC,OAA9K,QAA6L,aAA7L;AACA,SAASC,cAAT,EAAyBC,YAAzB,EAAuCC,aAAvC,QAA4D,0BAA5D;;;AAEA,SAASC,gBAAT,QAAiC,8BAAjC;AACA,OAAOC,YAAP,MAAyB,2CAAzB;AACA,SAASC,WAAT,EAAsBC,cAAtB;;;;AAGA,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAE5B,MAAMC,UAAU,GAAGN,aAAa,EAAhC;;AAEA,oBAAevB,UAAU,CAAC0B,WAAD,CAAzB;AAAA,MAAOI,IAAP,eAAOA,IAAP;;AACA,qBAAuB9B,UAAU,CAAC2B,cAAD,CAAjC;AAAA,MAAOI,YAAP,gBAAOA,YAAP;;AAEA,kBAAwB7B,QAAQ,EAAhC;AAAA;AAAA,MAAO8B,IAAP;AAAA,MAAaC,OAAb;;AACA,mBAA0B/B,QAAQ,CAAC,EAAD,CAAlC;AAAA;AAAA,MAAOgC,KAAP;AAAA,MAAcC,QAAd;;AAGAlC,EAAAA,SAAS,CAAC,YAAM;AAEd,QAAMmC,EAAE,GAAG,IAAIC,eAAJ,EAAX;AAEAN,IAAAA,YAAY,CAAC,IAAD,CAAZ;AAEEO,IAAAA,KAAK,CAAC,gCAAU,UAAV,GAAuBR,IAAI,CAACS,EAA7B,EAAiC;AACpCC,MAAAA,MAAM,EAAE,KAD4B;AAEpCC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAF2B,KAAjC,CAAL,CAMGC,IANH,CAMQ,UAAAC,QAAQ;AAAA,aAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,KANhB,EAOGF,IAPH,CAOQ,UAAAG,OAAO,EAAI;AACfZ,MAAAA,OAAO,CAACY,OAAD,CAAP;AACAd,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAVH,EAWGe,KAXH,CAWS,UAAAC,GAAG,EAAI;AACZZ,MAAAA,QAAQ,CAACY,GAAD,CAAR;AACD,KAbH;AAeA,WAAO;AAAA,aAAMX,EAAE,CAACY,KAAH,EAAN;AAAA,KAAP;AAEH,GAvBQ,EAuBN,EAvBM,CAAT;;AAyBA,MAAMC,UAAU,GAAG,SAAbA,UAAa;AAAA,QAAEC,IAAF,QAAEA,IAAF;AAAA,WAEjB,KAAC,GAAD;AACA,MAAA,iBAAiB,EAAC,GADlB;AAEA,MAAA,KAAK,EAAE;AACLC,QAAAA,WAAW,EAAE;AADR,OAFP;AAKA,MAAA,WAAW,EAAC,cALZ;AAMA,MAAA,EAAE,EAAC,GANH;AAAA,gBAQD,MAAC,SAAD;AAAW,QAAA,eAAe,EAAC,SAA3B;AAAqC,QAAA,OAAO,EAAC,IAA7C;AAAkD,QAAA,CAAC,EAAC,GAApD;AAAwD,QAAA,QAAQ,EAAC,QAAjE;AAAA,mBACGD,IAAI,CAACE,KAAL,KAAe,SAAf,GACD,KAAC,KAAD;AAAO,UAAA,MAAM,EAAEC,OAAO,sCAAtB;AAA8D,UAAA,KAAK,EAAE;AAACC,YAAAA,QAAQ,EAAC,UAAV;AAAsBC,YAAAA,KAAK,EAAC,EAA5B;AAAgCC,YAAAA,GAAG,EAAC,CAAC;AAArC,WAArE;AAA+G,UAAA,GAAG,EAAC,gBAAnH;AAAoI,UAAA,IAAI,EAAC;AAAzI,UADC,GAEA,mBAHH,EAIGN,IAAI,CAACE,KAAL,KAAe,MAAf,GACD,KAAC,KAAD;AAAO,UAAA,MAAM,EAAEC,OAAO,mCAAtB;AAA2D,UAAA,KAAK,EAAE;AAACC,YAAAA,QAAQ,EAAC,UAAV;AAAsBC,YAAAA,KAAK,EAAC,EAA5B;AAAgCC,YAAAA,GAAG,EAAC,CAAC;AAArC,WAAlE;AAA4G,UAAA,GAAG,EAAC,gBAAhH;AAAiI,UAAA,IAAI,EAAC;AAAtI,UADC,GAEA,mBANH,EAOIN,IAAI,CAACE,KAAL,KAAe,QAAf,GACF,KAAC,KAAD;AAAO,UAAA,MAAM,EAAEC,OAAO,qCAAtB;AAA6D,UAAA,KAAK,EAAE;AAACC,YAAAA,QAAQ,EAAC,UAAV;AAAsBC,YAAAA,KAAK,EAAC,EAA5B;AAAgCC,YAAAA,GAAG,EAAC,CAAC;AAArC,WAApE;AAA8G,UAAA,GAAG,EAAC,gBAAlH;AAAmI,UAAA,IAAI,EAAC;AAAxI,UADE,GAED,mBATH,EAUK,MAAC,MAAD;AAAQ,UAAA,KAAK,EAAE,CAAf;AAAkB,UAAA,cAAc,EAAC,eAAjC;AAAA,qBACE,MAAC,MAAD;AAAA,uBACGN,IAAI,CAACE,KAAL,KAAe,SAAf,GACC,KAAC,IAAD;AAAM,cAAA,KAAK,EAAC,cAAZ;AAA2B,cAAA,IAAI,MAA/B;AAAgC,cAAA,QAAQ,EAAC,IAAzC;AAAA,wBAA+CF,IAAI,CAACO;AAApD,cADD,GAC6E,mBAFhF,EAGGP,IAAI,CAACE,KAAL,KAAe,MAAf,GACC,KAAC,IAAD;AAAM,cAAA,KAAK,EAAC,cAAZ;AAA2B,cAAA,IAAI,MAA/B;AAAgC,cAAA,QAAQ,EAAC,IAAzC;AAAA;AAAA,cADD,GACkE,mBAJrE,EAKGF,IAAI,CAACE,KAAL,KAAe,QAAf,GACC,KAAC,IAAD;AAAM,cAAA,KAAK,EAAC,cAAZ;AAA2B,cAAA,IAAI,MAA/B;AAAgC,cAAA,QAAQ,EAAC,IAAzC;AAAA;AAAA,cADD,GACuE,mBAN1E,EAOE,KAAC,IAAD;AAAM,cAAA,KAAK,EAAC,cAAZ;AAAA,wBAA4BF,IAAI,CAACQ,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB;AAA5B,cAPF;AAAA,YADF,EAUE,KAAC,MAAD;AAAQ,YAAA,cAAc,EAAC,QAAvB;AAAA,sBACGT,IAAI,CAACE,KAAL,KAAe,QAAf,GACD,MAAC,IAAD;AAAM,cAAA,KAAK,EAAC,YAAZ;AAAyB,cAAA,QAAQ,EAAC,IAAlC;AAAuC,cAAA,IAAI,MAA3C;AAAA,8BAA8CF,IAAI,CAACU,YAAL,KAAsB,CAAtB,GAA0BV,IAAI,CAACU,YAA/B,GAA8C,GAA5F;AAAA,cADC,GAGD,MAAC,IAAD;AAAM,cAAA,KAAK,EAAC,SAAZ;AAAsB,cAAA,QAAQ,EAAC,IAA/B;AAAoC,cAAA,IAAI,MAAxC;AAAA,8BAA2CV,IAAI,CAACU,YAAL,KAAsB,CAAtB,GAA0BV,IAAI,CAACU,YAA/B,GAA8C,GAAzF;AAAA;AAJF,YAVF;AAAA,UAVL;AAAA;AARC,MAFiB;AAAA,GAAnB;;AA2CA,SACE;AAAA,cACA,KAAC,GAAD;AAAK,MAAA,CAAC,EAAC,MAAP;AAAc,MAAA,CAAC,EAAC,MAAhB;AAAuB,MAAA,eAAe,EAAC,SAAvC;AAAA,gBACI,MAAC,MAAD;AAAQ,QAAA,cAAc,EAAC,QAAvB;AAAgC,QAAA,UAAU,EAAC,QAA3C;AAAoD,QAAA,CAAC,EAAC,GAAtD;AAA0D,QAAA,KAAK,EAAE,CAAjE;AAAA,mBACE,MAAC,GAAD;AAAK,UAAA,CAAC,EAAC,GAAP;AAAW,UAAA,CAAC,EAAC,MAAb;AAAoB,UAAA,KAAK,EAAEC,MAAM,CAACC,SAAlC;AAA6C,UAAA,QAAQ,EAAC,QAAtD;AAAA,qBACE,KAAC,KAAD;AAAO,YAAA,MAAM,EAAET,OAAO,iCAAtB;AAAyD,YAAA,KAAK,EAAE;AAACC,cAAAA,QAAQ,EAAC,UAAV;AAAsBC,cAAAA,KAAK,EAAC,CAAC,EAA7B;AAAiCC,cAAAA,GAAG,EAAC,CAAC;AAAtC,aAAhE;AAA2G,YAAA,GAAG,EAAC,gBAA/G;AAAgI,YAAA,IAAI,EAAC;AAArI,YADF,EAEI,MAAC,MAAD;AAAQ,YAAA,cAAc,EAAC,eAAvB;AAAuC,YAAA,EAAE,EAAC,GAA1C;AAA8C,YAAA,EAAE,EAAC,GAAjD;AAAA,uBACE,MAAC,MAAD;AAAQ,cAAA,cAAc,EAAC,eAAvB;AAAA,yBACE,KAAC,OAAD;AAAS,gBAAA,EAAE,EAAC,GAAZ;AAAA,0BAAiB1B,IAAI,CAACiC;AAAtB,gBADF,EAEE,KAAC,IAAD;AAAA;AAAA,gBAFF,EAGE,MAAC,IAAD;AAAM,gBAAA,QAAQ,EAAC,KAAf;AAAqB,gBAAA,IAAI,MAAzB;AAA0B,gBAAA,EAAE,EAAC,IAA7B;AAAkC,gBAAA,KAAK,EAAC,SAAxC;AAAA,2BAAmDjC,IAAI,CAACkC,SAAxD;AAAA,gBAHF;AAAA,cADF,EAME,MAAC,MAAD;AAAQ,cAAA,cAAc,EAAC,UAAvB;AAAkC,cAAA,EAAE,EAAC,GAArC;AAAyC,cAAA,KAAK,EAAE,CAAhD;AAAA,yBACE,KAAC,gBAAD;AAAkB,gBAAA,OAAO,EAAE;AAAA,yBAAInC,UAAU,CAACoC,QAAX,CAAoB,kBAApB,CAAJ;AAAA,iBAA3B;AAAA,0BACE,KAAC,MAAD;AAAQ,kBAAA,WAAW,EAAC,SAApB;AAA8B,kBAAA,WAAW,EAAC,GAA1C;AAA8C,kBAAA,EAAE,EAAC,GAAjD;AAAqD,kBAAA,EAAE,EAAC,GAAxD;AAA4D,kBAAA,OAAO,EAAC,KAApE;AAA0E,kBAAA,EAAE,EAAC,GAA7E;AAAA,4BACE,KAAC,IAAD;AAAM,oBAAA,QAAQ,EAAC,IAAf;AAAoB,oBAAA,KAAK,EAAC,SAA1B;AAAoC,oBAAA,IAAI,MAAxC;AAAA;AAAA;AADF;AADF,gBADF,EAME,KAAC,gBAAD;AAAkB,gBAAA,OAAO,EAAE;AAAA,yBAAIpC,UAAU,CAACoC,QAAX,CAAoB,aAApB,CAAJ;AAAA,iBAA3B;AAAA,0BACE,KAAC,MAAD;AAAQ,kBAAA,eAAe,EAAC,SAAxB;AAAkC,kBAAA,EAAE,EAAC,GAArC;AAAyC,kBAAA,EAAE,EAAC,GAA5C;AAAgD,kBAAA,OAAO,EAAC,KAAxD;AAA8D,kBAAA,WAAW,EAAC,GAA1E;AAA8E,kBAAA,WAAW,EAAC,SAA1F;AAAA,4BACE,KAAC,IAAD;AAAM,oBAAA,QAAQ,EAAC,IAAf;AAAoB,oBAAA,KAAK,EAAC,OAA1B;AAAkC,oBAAA,IAAI,MAAtC;AAAA;AAAA;AADF;AADF,gBANF;AAAA,cANF;AAAA,YAFJ;AAAA,UADF,EAwBE,KAAC,OAAD;AAAS,UAAA,QAAQ,EAAC,IAAlB;AAAuB,UAAA,EAAE,EAAC,GAA1B;AAA8B,UAAA,EAAE,EAAC,GAAjC;AAAA;AAAA,UAxBF,EAyBG,CAACjC,IAAD,GACD,KAAC,IAAD;AAAA;AAAA,UADC,GAGD,KAAC,QAAD;AACE,UAAA,IAAI,EAAEA,IADR;AAEE,UAAA,QAAQ,EAAE,IAFZ;AAGE,UAAA,uBAAuB,EAAE,KAH3B;AAIE,UAAA,KAAK,EAAC,MAJR;AAKE,UAAA,MAAM,EAAC,KALT;AAME,UAAA,kBAAkB,EAAE,CANtB;AAOE,UAAA,mBAAmB,EAAE,EAPvB;AAQE,UAAA,UAAU,EAAEiB,UARd;AASE,UAAA,YAAY,EAAE,sBAACC,IAAD;AAAA,mBAAUgB,QAAQ,CAAChB,IAAI,CAACiB,UAAN,CAAlB;AAAA;AAThB,UA5BF,EAwCE,KAAC,MAAD;AAAQ,UAAA,cAAc,EAAC,YAAvB;AAAoC,UAAA,UAAU,EAAC;AAA/C,UAxCF;AAAA;AADJ;AADA,IADF;AAiDD,CAhIM;AAmIP,gBAAe,YAAM;AACjB,SACE,KAAC,kBAAD;AAAA,cACE,KAAC,MAAD;AAAQ,MAAA,IAAI,EAAE,CAAd;AAAA,gBACE,KAAC,QAAD;AADF;AADF,IADF;AAOH,CARD;AAUA,IAAMN,MAAM,GAAGO,UAAU,CAACC,MAAX,CAAkB;AAC/BP,EAAAA,SAAS,EAAC;AACRQ,IAAAA,WAAW,EAAE,SADL;AAERC,IAAAA,YAAY,EAAE;AAACC,MAAAA,KAAK,EAAE,CAAR;AAAWC,MAAAA,MAAM,EAAE;AAAnB,KAFN;AAGRC,IAAAA,aAAa,EAAE,GAHP;AAIRC,IAAAA,YAAY,EAAE,CAJN;AAKRC,IAAAA,SAAS,EAAE,EALH;AAMRC,IAAAA,eAAe,EAAE,OANT;AAORC,IAAAA,YAAY,EAAC;AAPL;AADqB,CAAlB,CAAf","sourcesContent":["import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { NativeBaseProvider, Box, Button, ScrollView, Stack, Center, Accordion, Text, Divider, List, Image, PresenceTransition, Pressable, VStack, Heading, HStack, FlatList, Spinner } from 'native-base';\nimport { useFocusEffect, useIsFocused, useNavigation } from '@react-navigation/native';\nimport { ImageBackground, StyleSheet } from \"react-native\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { UserContext, LoadingContext } from \"../../context/context\";\nimport { API_URL } from \"@env\";\n\nexport const MyPoints = () => {\n  \n  const Navigation = useNavigation(); \n\n  const {user} = useContext(UserContext);\n  const {setIsLoading} = useContext(LoadingContext);\n\n  const [data, setData] = useState();\n  const [error, setError] = useState(\"\");\n\n  //load recycle's history\n  useEffect(() => {\n\n    const ac = new AbortController();\n\n    setIsLoading(true);\n\n      fetch(API_URL + 'mrpoint/' + user.id, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n        .then(response => response.json())\n        .then(results => {\n          setData(results);\n          setIsLoading(false);\n        })\n        .catch(err => {\n          setError(err);\n        });\n\n      return () => ac.abort();\n\n  }, []);\n\n  const renderItem = ({item}) => (\n    \n    <Box\n    borderBottomWidth=\"1\"\n    _dark={{\n      borderColor: \"gray.600\",\n    }}\n    borderColor=\"coolGray.200\"\n    py=\"2\"\n  >\n   <Pressable backgroundColor=\"#F9F9F9\" rounded=\"lg\" p=\"4\" overflow=\"hidden\">\n     {item.event === \"recycle\" ? \n     <Image source={require('../../public/assets/recycle_bg.png')} style={{position:\"absolute\", right:12, top:-20}} alt=\"Alternate Text\" size=\"40\"/>\n     :<></>}\n     {item.event === \"game\" ? \n     <Image source={require('../../public/assets/game_bg.png')} style={{position:\"absolute\", right:10, top:-70}} alt=\"Alternate Text\" size=\"40\"/>\n     :<></>}\n      {item.event === \"redeem\" ? \n     <Image source={require('../../public/assets/reward_bg.png')} style={{position:\"absolute\", right:10, top:-30}} alt=\"Alternate Text\" size=\"40\"/>\n     :<></>}\n        <HStack space={3} justifyContent=\"space-between\" >\n          <VStack>\n            {item.event === \"recycle\" ? \n              <Text color=\"coolGray.800\" bold fontSize=\"md\">{item.collector_name}</Text>: <></>}\n            {item.event === \"game\" ? \n              <Text color=\"coolGray.800\" bold fontSize=\"md\">Game Reward</Text>:<></>}\n            {item.event === \"redeem\" ? \n              <Text color=\"coolGray.800\" bold fontSize=\"md\">Voucher Redeemed</Text>:<></>}\n            <Text color=\"coolGray.600\">{item.time.split('T')[0]}</Text>\n          </VStack>\n          <VStack justifyContent=\"center\">\n            {item.event === \"redeem\" ? \n            <Text color=\"danger.600\" fontSize=\"lg\" bold>-{item.points_given !== 0 ? item.points_given : \"0\"} pts</Text>\n            : \n            <Text color=\"#1FAA8F\" fontSize=\"lg\" bold>+{item.points_given !== 0 ? item.points_given : \"0\"} pts</Text>\n            }\n          </VStack>\n        </HStack>\n    </Pressable>\n  </Box>\n\n  )\n\n  return (\n    <>\n    <Box w=\"full\" h=\"full\" backgroundColor=\"#f2f2f2\">\n        <VStack justifyContent=\"center\" alignItems=\"center\" p=\"5\" space={3}>\n          <Box p=\"3\" w=\"full\" style={styles.container} overflow=\"hidden\">\n            <Image source={require('../../public/assets/mr-bg.png')} style={{position:\"absolute\", right:-20, top:-40}} alt=\"Alternate Text\" size=\"56\"/>\n              <HStack justifyContent=\"space-between\" px=\"3\" py=\"2\">\n                <VStack justifyContent=\"space-between\">\n                  <Heading mb=\"4\">{user.name}</Heading>\n                  <Text>Available Balance:</Text>\n                  <Text fontSize=\"3xl\" bold mt=\"-1\" color=\"#1FAA8F\">{user.mr_points} pts</Text>\n                </VStack>\n                <VStack justifyContent=\"flex-end\" py=\"1\" space={1}>\n                  <TouchableOpacity onPress={()=>Navigation.navigate(\"Conversion Rates\")}>\n                    <Center borderColor=\"#1FAA8F\" borderWidth=\"2\" px=\"3\" py=\"1\" rounded=\"2xl\" mt=\"5\">\n                      <Text fontSize=\"sm\" color=\"#1FAA8F\" bold>Conversion Rates</Text>\n                    </Center>\n                  </TouchableOpacity> \n                  <TouchableOpacity onPress={()=>Navigation.navigate(\"Reward List\")}>\n                    <Center backgroundColor=\"#FC8B10\" px=\"3\" py=\"1\" rounded=\"2xl\" borderWidth=\"1\" borderColor=\"#FC8B10\">\n                      <Text fontSize=\"sm\" color=\"white\" bold>Redeem Rewards</Text>\n                    </Center>\n                  </TouchableOpacity> \n                </VStack>\n              </HStack>\n          </Box>\n          \n          <Heading fontSize=\"md\" pl=\"4\" mt=\"5\">History</Heading>\n          {!data ? \n          <Text>Loading...</Text>\n          :\n          <FlatList\n            data={data}\n            inverted={true}\n            scrollToOverflowEnabled={false}\n            width=\"full\"\n            height=\"440\"\n            initialNumToRender={5}\n            maxToRenderPerBatch={10}\n            renderItem={renderItem}\n            keyExtractor={(item) => parseInt(item.mrpoint_id)}\n          />          \n          }\n          <VStack justifyContent=\"flex-start\" alignItems=\"flex-start\">\n          </VStack>\n        </VStack>\n      </Box>\n      </>\n  );\n};\n\n\nexport default () => {\n    return (\n      <NativeBaseProvider>\n        <Center flex={1}>\n          <MyPoints />\n        </Center>\n      </NativeBaseProvider>\n    )\n};\n\nconst styles = StyleSheet.create({\n  container:{\n    shadowColor: '#171717',\n    shadowOffset: {width: 0, height: 0},\n    shadowOpacity: 0.2,\n    shadowRadius: 8,\n    elevation: 20,\n    backgroundColor: 'white',\n    borderRadius:14\n  }\n});"]},"metadata":{},"sourceType":"module"}