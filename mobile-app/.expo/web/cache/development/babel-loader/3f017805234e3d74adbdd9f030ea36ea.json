{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"label\", \"children\", \"onClose\", \"onOpen\", \"defaultIsOpen\", \"placement\", \"openDelay\", \"closeDelay\", \"closeOnClick\", \"offset\", \"isDisabled\", \"hasArrow\", \"arrowSize\", \"isOpen\"];\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport { OverlayContainer } from '@react-native-aria/overlays';\nimport React from 'react';\nimport { useControllableState, useKeyboardDismissable } from \"../../../hooks\";\nimport { Popper } from \"../Popper\";\nimport { composeEventHandlers, mergeRefs } from \"../../../utils\";\nimport { PresenceTransition } from \"../Transitions\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { usePropsResolution } from \"../../../hooks\";\nimport Box from \"../../primitives/Box\";\nimport { useId } from '@react-aria/utils';\nimport { useHasResponsiveProps } from \"../../../hooks/useHasResponsiveProps\";\nexport var Tooltip = function Tooltip(_ref3) {\n  var label = _ref3.label,\n      children = _ref3.children,\n      onClose = _ref3.onClose,\n      onOpen = _ref3.onOpen,\n      defaultIsOpen = _ref3.defaultIsOpen,\n      placement = _ref3.placement,\n      _ref3$openDelay = _ref3.openDelay,\n      openDelay = _ref3$openDelay === void 0 ? 0 : _ref3$openDelay,\n      _ref3$closeDelay = _ref3.closeDelay,\n      closeDelay = _ref3$closeDelay === void 0 ? 0 : _ref3$closeDelay,\n      _ref3$closeOnClick = _ref3.closeOnClick,\n      closeOnClick = _ref3$closeOnClick === void 0 ? true : _ref3$closeOnClick,\n      offset = _ref3.offset,\n      isDisabled = _ref3.isDisabled,\n      hasArrow = _ref3.hasArrow,\n      _ref3$arrowSize = _ref3.arrowSize,\n      arrowSize = _ref3$arrowSize === void 0 ? 12 : _ref3$arrowSize,\n      isOpenProp = _ref3.isOpen,\n      props = _objectWithoutProperties(_ref3, _excluded);\n\n  var _ref, _ref2, _props$backgroundColo;\n\n  if (hasArrow && offset === undefined) {\n    offset = 0;\n  } else {\n    offset = 6;\n  }\n\n  var resolvedProps = usePropsResolution('Tooltip', props);\n\n  var _useControllableState = useControllableState({\n    value: isOpenProp,\n    defaultValue: defaultIsOpen,\n    onChange: function onChange(value) {\n      value ? onOpen && onOpen() : onClose && onClose();\n    }\n  }),\n      _useControllableState2 = _slicedToArray(_useControllableState, 2),\n      isOpen = _useControllableState2[0],\n      setIsOpen = _useControllableState2[1];\n\n  var arrowBg = (_ref = (_ref2 = (_props$backgroundColo = props.backgroundColor) !== null && _props$backgroundColo !== void 0 ? _props$backgroundColo : props.bgColor) !== null && _ref2 !== void 0 ? _ref2 : props.bg) !== null && _ref !== void 0 ? _ref : resolvedProps.bg;\n  var targetRef = React.useRef(null);\n  var enterTimeout = React.useRef();\n  var exitTimeout = React.useRef();\n  var tooltipID = useId();\n  var openWithDelay = React.useCallback(function () {\n    if (!isDisabled) {\n      enterTimeout.current = setTimeout(function () {\n        return setIsOpen(true);\n      }, openDelay);\n    }\n  }, [isDisabled, setIsOpen, openDelay]);\n  var closeWithDelay = React.useCallback(function () {\n    if (enterTimeout.current) {\n      clearTimeout(enterTimeout.current);\n    }\n\n    exitTimeout.current = setTimeout(function () {\n      return setIsOpen(false);\n    }, closeDelay);\n  }, [closeDelay, setIsOpen]);\n  React.useEffect(function () {\n    return function () {\n      clearTimeout(enterTimeout.current);\n      clearTimeout(exitTimeout.current);\n    };\n  }, []);\n  var newChildren = children;\n\n  if (typeof children === 'string') {\n    newChildren = React.createElement(Box, null, children);\n  }\n\n  newChildren = React.cloneElement(newChildren, {\n    'onPress': composeEventHandlers(newChildren.props.onPress, function () {\n      if (closeOnClick) {\n        closeWithDelay();\n      }\n    }),\n    'onFocus': composeEventHandlers(newChildren.props.onFocus, openWithDelay),\n    'onBlur': composeEventHandlers(newChildren.props.onBlur, closeWithDelay),\n    'onMouseEnter': composeEventHandlers(newChildren.props.onMouseEnter, openWithDelay),\n    'onMouseLeave': composeEventHandlers(newChildren.props.onMouseLeave, closeWithDelay),\n    'ref': mergeRefs([newChildren.ref, targetRef]),\n    'aria-describedby': isOpen ? tooltipID : undefined\n  });\n  useKeyboardDismissable({\n    enabled: isOpen,\n    callback: function callback() {\n      return setIsOpen(false);\n    }\n  });\n\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n\n  return React.createElement(React.Fragment, null, newChildren, isOpen && React.createElement(OverlayContainer, null, React.createElement(PresenceTransition, {\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1,\n      transition: {\n        duration: 150\n      }\n    },\n    exit: {\n      opacity: 0,\n      transition: {\n        duration: 100\n      }\n    },\n    visible: isOpen,\n    style: StyleSheet.absoluteFill\n  }, React.createElement(Popper, {\n    triggerRef: targetRef,\n    onClose: function onClose() {\n      return setIsOpen(false);\n    },\n    placement: placement,\n    offset: offset\n  }, React.createElement(Popper.Content, {\n    isOpen: isOpen\n  }, hasArrow && React.createElement(Popper.Arrow, {\n    borderColor: \"transparent\",\n    backgroundColor: arrowBg,\n    height: arrowSize,\n    width: arrowSize\n  }), React.createElement(Box, _extends({}, resolvedProps, {\n    accessibilityRole: Platform.OS === 'web' ? 'tooltip' : undefined,\n    nativeID: tooltipID\n  }), label))))));\n};","map":{"version":3,"sources":["Tooltip.tsx"],"names":["Tooltip","openDelay","closeDelay","closeOnClick","arrowSize","isOpen","props","hasArrow","offset","resolvedProps","usePropsResolution","useControllableState","value","defaultValue","onChange","onOpen","onClose","arrowBg","targetRef","React","enterTimeout","exitTimeout","tooltipID","useId","openWithDelay","setTimeout","setIsOpen","closeWithDelay","clearTimeout","newChildren","composeEventHandlers","mergeRefs","undefined","useKeyboardDismissable","enabled","callback","useHasResponsiveProps","opacity","transition","duration","StyleSheet","absoluteFill","Platform"],"mappings":"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","sourcesContent":["import { OverlayContainer } from '@react-native-aria/overlays';\nimport React from 'react';\nimport { useControllableState, useKeyboardDismissable } from '../../../hooks';\nimport { Popper } from '../Popper';\nimport { composeEventHandlers, mergeRefs } from '../../../utils';\nimport { PresenceTransition } from '../Transitions';\nimport { Platform, StyleSheet } from 'react-native';\nimport { usePropsResolution } from '../../../hooks';\nimport Box from '../../primitives/Box';\nimport type { ITooltipProps } from './types';\nimport { useId } from '@react-aria/utils';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nexport const Tooltip = ({\n  label,\n  children,\n  onClose,\n  onOpen,\n  defaultIsOpen,\n  placement,\n  openDelay = 0,\n  closeDelay = 0,\n  closeOnClick = true,\n  offset,\n  isDisabled,\n  hasArrow,\n  arrowSize = 12,\n  isOpen: isOpenProp,\n  ...props\n}: ITooltipProps) => {\n  if (hasArrow && offset === undefined) {\n    offset = 0;\n  } else {\n    offset = 6;\n  }\n\n  const resolvedProps = usePropsResolution('Tooltip', props);\n  const [isOpen, setIsOpen] = useControllableState({\n    value: isOpenProp,\n    defaultValue: defaultIsOpen,\n    onChange: (value) => {\n      value ? onOpen && onOpen() : onClose && onClose();\n    },\n  });\n\n  const arrowBg =\n    props.backgroundColor ?? props.bgColor ?? props.bg ?? resolvedProps.bg;\n\n  const targetRef = React.useRef(null);\n\n  const enterTimeout = React.useRef<any>();\n  const exitTimeout = React.useRef<any>();\n  const tooltipID = useId();\n\n  const openWithDelay = React.useCallback(() => {\n    if (!isDisabled) {\n      enterTimeout.current = setTimeout(() => setIsOpen(true), openDelay);\n    }\n  }, [isDisabled, setIsOpen, openDelay]);\n\n  const closeWithDelay = React.useCallback(() => {\n    if (enterTimeout.current) {\n      clearTimeout(enterTimeout.current);\n    }\n    exitTimeout.current = setTimeout(() => setIsOpen(false), closeDelay);\n  }, [closeDelay, setIsOpen]);\n\n  React.useEffect(\n    () => () => {\n      clearTimeout(enterTimeout.current);\n      clearTimeout(exitTimeout.current);\n    },\n    []\n  );\n\n  let newChildren = children;\n\n  if (typeof children === 'string') {\n    newChildren = <Box>{children}</Box>;\n  }\n\n  newChildren = React.cloneElement(newChildren, {\n    'onPress': composeEventHandlers<any>(newChildren.props.onPress, () => {\n      if (closeOnClick) {\n        closeWithDelay();\n      }\n    }),\n    'onFocus': composeEventHandlers<any>(\n      newChildren.props.onFocus,\n      openWithDelay\n    ),\n    'onBlur': composeEventHandlers<any>(\n      newChildren.props.onBlur,\n      closeWithDelay\n    ),\n    'onMouseEnter': composeEventHandlers<any>(\n      newChildren.props.onMouseEnter,\n      openWithDelay\n    ),\n    'onMouseLeave': composeEventHandlers<any>(\n      newChildren.props.onMouseLeave,\n      closeWithDelay\n    ),\n    'ref': mergeRefs([newChildren.ref, targetRef]),\n\n    'aria-describedby': isOpen ? tooltipID : undefined,\n  });\n\n  useKeyboardDismissable({\n    enabled: isOpen,\n    callback: () => setIsOpen(false),\n  });\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n  return (\n    <>\n      {newChildren}\n      {isOpen && (\n        <OverlayContainer>\n          <PresenceTransition\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1, transition: { duration: 150 } }}\n            exit={{ opacity: 0, transition: { duration: 100 } }}\n            visible={isOpen}\n            style={StyleSheet.absoluteFill}\n          >\n            <Popper\n              triggerRef={targetRef}\n              onClose={() => setIsOpen(false)}\n              placement={placement}\n              offset={offset}\n            >\n              <Popper.Content isOpen={isOpen}>\n                {hasArrow && (\n                  <Popper.Arrow\n                    borderColor=\"transparent\"\n                    backgroundColor={arrowBg}\n                    height={arrowSize}\n                    width={arrowSize}\n                  />\n                )}\n                <Box\n                  {...resolvedProps}\n                  //@ts-ignore\n                  accessibilityRole={\n                    Platform.OS === 'web' ? 'tooltip' : undefined\n                  }\n                  nativeID={tooltipID}\n                >\n                  {label}\n                </Box>\n              </Popper.Content>\n            </Popper>\n          </PresenceTransition>\n        </OverlayContainer>\n      )}\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}